(function(b,h,g,f,a,p,t){b.extend(tribe_ev.fn,{set_form:function(a){var g=!1,h=b("body"),l=b("#tribe_events_filters_form"),c=b("#tribe-bar-form");h.addClass("tribe-reset-on");l.length&&(l.tribe_clear_form(),l.find(".ui-slider").length&&(g=!0,b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),e=a.prev(),d=e.prev(),c=a.slider("option");a.slider("values",0,c.min);a.slider("values",1,c.max);d.text(c.min+" - "+c.max);e.val("")})));c.length&&c.tribe_clear_form();
a=f.parse_string(a);b.each(a,function(a,e){if("action"!==a){var d=decodeURI(a),c="";if(1===e.length)b('[name="'+d+'"]').is('input[type="text"], input[type="hidden"]')?b('[name="'+d+'"]').val(e):b('[name="'+d+'"][value="'+e+'"]').is(":checkbox, :radio")?b('[name="'+d+'"][value="'+e+'"]').prop("checked",!0):b('[name="'+d+'"]').is("select")&&b('select[name="'+d+'"] option[value="'+e+'"]').attr("selected",!0);else for(var f=0;f<e.length;f++)c=b('[name="'+d+'"][value="'+e[f]+'"]'),c.is(":checkbox, :radio")?
c.prop("checked",!0):b('select[name="'+d+'"] option[value="'+e[f]+'"]').attr("selected",!0)}});g&&b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.val().split("-");""!==d[0]&&(c=c.prev(),a.slider("values",0,d[0]),a.slider("values",1,d[1]),c.text(d[0]+" - "+d[1]),a.slider("refresh"))});h.removeClass("tribe-reset-on")}});b(document).ready(function(){function m(b){if(b||"filters"===a.ajax_trigger&&h.v_width<h.mobile_break)d.addClass("tribe-filters-closed").removeClass("tribe-filters-open"),
tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","closed"),a.ajax_trigger=""}function r(){d.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open");tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}function s(){h.v_width<h.mobile_break&&m(!0)}function l(){if("past"===a.view||"list"===a.view||"photo"===a.view||"map"===a.view){if(a.paged=1,("past"===a.view||"list"===a.view)&&a.filter_cats)h.cur_url=b("#tribe-events-header").attr("data-baseurl")}else if("month"===
a.view)a.date=b("#tribe-events-header").attr("data-date"),h.cur_url=a.filter_cats?b("#tribe-events-header").attr("data-baseurl"):f.url_path(document.URL);else if("week"===a.view||"day"===a.view)a.date=b("#tribe-events-header").attr("data-date")}b(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var c=b(".tribe-events-filter-autocomplete .chosen-dropdown").attr("data-no-results-text");b(".tribe-events-filter-autocomplete .chosen-dropdown").chosen({no_results_text:c,width:"100%",
display_selected_options:!1});var k=b("#tribe_events_filters_form"),e=b(".tribe-events-filters-horizontal"),c=b("#tribe-events"),d=b("body"),n=c.length&&c.tribe_has_attr("data-hover-filters")&&1===c.data("hover-filters")?!0:!1;b("#tribe_events_filter_item_eventcategory").length&&a.category&&(a.filter_cats=!0);tribe_storage&&(c=tribe_storage.getItem("tribe_events_filters_wrapper"),null==c&&d.is(".tribe-filters-closed")&&(c="closed"),c&&"closed"==c?m(!0):c&&"open"==c&&r(),b(".tribe_events_filter_item").each(function(){var a=
b(this),c=a.attr("id");(c=tribe_storage.getItem(c))&&"closed"==c&&a.addClass("closed")}));b("#tribe_events_filters_wrapper").on("click","#tribe_events_filters_reset",function(a){a.preventDefault();d.addClass("tribe-reset-on");k.tribe_clear_form();k.find(".ui-slider").length&&b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.prev(),e=a.slider("option");a.slider("values",0,e.min);a.slider("values",1,e.max);d.text(e.min+" - "+e.max);c.val("")});
e.length&&b(".tribe_events_filter_item").addClass("closed");k.submit();d.removeClass("tribe-reset-on")}).on("click","#tribe_events_filters_toggle",function(a){a.preventDefault();d.is(".tribe-filters-closed")?r():m(!0)});d.on("click",function(){e.length&&!n&&b(".tribe_events_filter_item").addClass("closed")}).on("click",".tribe-events-filter-group",function(a){e.length&&!n&&a.stopPropagation()});if(n)k.on("mouseover",".tribe_events_filter_item",function(){e.length&&b(this).removeClass("closed")}).on("mouseout",
".tribe_events_filter_item",function(){e.length&&b(".tribe_events_filter_item").addClass("closed")});k.on("click","h3",function(a){if(!e.length||!n){var c=b(this).parent(),d=c.attr("id");e.length&&(a.stopPropagation(),b(".tribe_events_filter_item").not(c).addClass("closed"));c.hasClass("closed")?(c.removeClass("closed"),tribe_storage&&tribe_storage.setItem(d,"open")):(c.addClass("closed"),tribe_storage&&tribe_storage.setItem(d,"closed"))}});s();b(g).on("tribe_ev_ajaxSuccess",function(){m(!1)}).on("tribe_ev_resizeComplete",
s);k.on("submit",function(c){"change_view"!==tribe_events_bar_action&&(c.preventDefault(),a.popping=!1,l(),f.pre_ajax(function(){b(g).trigger("tribe_ev_runAjax");a.ajax_trigger="filters"}))});if(p.live_ajax()&&p.pushstate){k.find('input[type="submit"]').remove();var q=function(){f.disable_inputs("#tribe_events_filters_form","input, select");a.popping=!1;l();"map"===a.view?p.pushstate?f.pre_ajax(function(){b(g).trigger("tribe_ev_runAjax");a.ajax_trigger="filters"}):f.pre_ajax(function(){b(g).trigger("tribe_ev_reloadOldBrowser")}):
f.pre_ajax(function(){b(g).trigger("tribe_ev_runAjax");a.ajax_trigger="filters"})};if(b("#tribe_events_filter_item_eventcategory").length&&a.category)b("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",function(){f.setup_ajax_timer(function(){q()})});k.on("slidechange",".ui-slider",function(){f.setup_ajax_timer(function(){q()})}).on("change","input, select",function(){a.filter_cats&&"tribe_events_filter_item_eventcategory"===b(this).parents(".tribe_events_filter_item").attr("id")||
f.setup_ajax_timer(function(){q()})})}b(g).on("tribe_ev_collectParams",function(){var b=f.serialize("#tribe_events_filters_form","input, select");b.length?(a.filters=!0,a.params=a.params+"&"+b,"map"!==a.view&&(a.url_params=a.url_params.length?a.url_params+"&"+b:b)):a.filters=!1});b(g).on("tribe_ev_postCollectBarParams",function(){a.filter_cats&&b("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var c=f.serialize("#tribe_events_filters_form",
"input, select");a.url_params.length&&c.length?a.url_params=a.url_params+"&"+c:c.length&&(a.url_params=c)});b("#tribe_events_filter_item_eventcategory").length&&a.category&&(d.addClass("tribe-reset-on"),b('#tribe_events_filter_item_eventcategory option[data-slug="'+a.category+'"]').attr("selected",!0),b('#tribe_events_filter_item_eventcategory input[data-slug="'+a.category+'"]').attr("checked","checked"),d.removeClass("tribe-reset-on"))})})(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,
tribe_ev.tests,tribe_debug);
